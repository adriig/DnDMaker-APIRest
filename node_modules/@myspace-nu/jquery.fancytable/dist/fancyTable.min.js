/*!
 * jQuery fancyTable plugin v1.0.9
 * https://github.com/myspace-nu
 *
 * Copyright 2018 Johan Johansson
 * Released under the MIT license
 */

!function(c){c.fn.fancyTable=function(a){var i=c.extend({inputStyle:"",inputPlaceholder:"Search...",pagination:!1,paginationClass:"btn btn-light",paginationClassActive:"active",pagClosest:3,perPage:10,sortable:!0,searchable:!0,onInit:function(){},testing:!1},a),r=this;return this.tableUpdate=function(n){if(n.fancyTable.matches=0,c(n).find("tbody tr").each(function(){var a=0,e=!0,t=!1;c(this).find("td").each(function(){i.globalSearch||!n.fancyTable.searchArr[a]||new RegExp(n.fancyTable.searchArr[a],"i").test(c(this).html())?!i.globalSearch||n.fancyTable.search&&!new RegExp(n.fancyTable.search,"i").test(c(this).html())||(t=!0):e=!1,a++}),i.globalSearch&&t||!i.globalSearch&&e?(n.fancyTable.matches++,!i.pagination||n.fancyTable.matches>n.fancyTable.perPage*(n.fancyTable.page-1)&&n.fancyTable.matches<=n.fancyTable.perPage*n.fancyTable.page?c(this).show():c(this).hide()):c(this).hide()}),n.fancyTable.pages=Math.ceil(n.fancyTable.matches/n.fancyTable.perPage),i.pagination){c(n).find(".pag").empty();for(var a=1;a<=n.fancyTable.pages;a++)if(1==a||a>n.fancyTable.page-(i.pagClosest+1)&&a<n.fancyTable.page+(i.pagClosest+1)||a==n.fancyTable.pages){var e=c("<a>",{html:a,"data-n":a,style:"margin:0.2em",class:i.paginationClass+" "+(a==n.fancyTable.page?i.paginationClassActive:"")}).css("cursor","pointer").bind("click",function(){n.fancyTable.page=c(this).data("n"),r.tableUpdate(n)});a==n.fancyTable.pages&&n.fancyTable.page<n.fancyTable.pages-i.pagClosest-1&&c(n).find(".pag").append(c("<span>...</span>")),c(n).find(".pag").append(e),1==a&&n.fancyTable.page>i.pagClosest+2&&c(n).find(".pag").append(c("<span>...</span>"))}}},this.tableSort=function(l){if(void 0!==l.fancyTable.sortColumn&&l.fancyTable.sortColumn<l.fancyTable.nColumns){var a=c(l).find("tbody tr").toArray().sort(function(a,e){var t=c(a).find("td").eq(l.fancyTable.sortColumn).html(),n=c(e).find("td").eq(l.fancyTable.sortColumn).html();return t<n?-l.fancyTable.sortOrder:n<t?l.fancyTable.sortOrder:0});c(l).find("tbody").empty().append(a)}},this.each(function(){if("TABLE"!==c(this).prop("tagName"))return console.warn("fancyTable: Element is not a table."),!0;var t=c(this);if(t.fancyTable={nColumns:c(t).find("td").first().parent().find("td").length,nRows:c(this).find("tbody tr").length,perPage:i.perPage,page:1,pages:0,matches:0,searchArr:[],search:"",sortColumn:i.sortColumn,sortOrder:1},0==c(t).find("tbody").length){var a=c(t).html();c(t).empty(),c(t).append("<tbody>").append(c(a))}if(0==c(t).find("thead").length&&c(t).prepend(c("<thead>")),i.sortable){var n=0;c(t).find("thead th").each(function(){var a=c(this).html(),e=c("<a>",{html:a,"data-n":n,class:""}).css("cursor","pointer").bind("click",function(){t.fancyTable.sortColumn==c(this).data("n")?t.fancyTable.sortOrder=-t.fancyTable.sortOrder:t.fancyTable.sortOrder=1,t.fancyTable.sortColumn=c(this).data("n"),r.tableSort(t),r.tableUpdate(t)});c(this).empty(),c(this).append(e),n++})}if(i.searchable){var l=c("<tr>");if(i.globalSearch){var e=c("<input>",{placeholder:i.inputPlaceholder,style:"width:100%;"+i.inputStyle}).bind("change paste keyup",function(){t.fancyTable.search=c(this).val(),r.tableUpdate(t)}),s=c("<th>",{style:"padding:2px;"}).attr("colspan",t.fancyTable.nColumns);c(e).appendTo(c(s)),c(s).appendTo(c(l))}else{n=0;c(t).find("td").first().parent().find("td").each(function(){t.fancyTable.searchArr.push("");var a=c("<input>",{"data-n":n,placeholder:i.inputPlaceholder,style:"width:100%;"+i.inputStyle}).bind("change paste keyup",function(){t.fancyTable.searchArr[c(this).data("n")]=c(this).val(),r.tableUpdate(t)}),e=c("<th>",{style:"padding:2px;"});c(a).appendTo(c(e)),c(e).appendTo(c(l)),n++})}l.appendTo(c(t).find("thead"))}r.tableSort(t),i.pagination&&(c(t).find("tfoot").remove(),c(t).append(c("<tfoot><tr></tr></tfoot>")),c(t).find("tfoot tr").append(c("<td class='pag'></td>",{}).attr("colspan",t.fancyTable.nColumns))),r.tableUpdate(t)}),this}}(jQuery);